{% extends ('guest/base.html.twig') %}

{% block metatitle %}Liste des Pièces | guest Renault 21 TD{% endblock metatitle %}




    {% block main %}
        <div style="
    position: relative;
    min-height: 100vh;
    width: 100%;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;">

    <!-- Image de fond -->
    <div style="
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background-image: url('{{ asset('images/r21 face route.webp') }}');
        background-size: cover;
        background-position: center;
        z-index: 1;">
    </div>
    <div style="
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(144, 178, 250, 0.9); 
        z-index: 2;">
    </div>
    <div style="position: relative; z-index: 3; padding: 2rem;">
        <div class="list-pieces">
            <h1 class="text-center mb-4">Liste des pièces</h1>
            {% if pieces is empty %}
                <p>Aucune pièce trouvée.</p>
            {% else %}
                {% for piece in pieces %}
                <div class="piece">
                    <h2>{{ piece.name }}</h2>
                    <p>{{ piece.description }}</p>
                    <p>Categorie: {{ piece.name }}</p>
                    <p>Created at: {{ piece.createdAt|date('Y-m-d H:i') }}</p>
                    {% if piece.image %}
                        <img src="{{ asset('Uploads/pieces/' ~ piece.image) }}" alt="Image de la pièce" class="img-fluid"
                            style="display:block; margin: 0 auto 1rem auto; max-width: 250px; border-radius: 8px;">
                    {% endif %}
                    <p>{{ piece.user.pseudo }}</p>
                    <a href="{{ path('details-piece', {'id': piece.name}) }}">Voir les détails</a>
                </div>
                {% endfor %}
            {% endif %}

            {% for message in app.flashes('info') %}
                <div class="alert alert-info">{{ message }}</div>
            {% endfor %}
            {% for message in app.flashes('error') %}
                <div class="alert alert-danger">{{ message }}</div>
            {% endfor %}
        </div>
{% endblock main %}



{% block javascripts %}
    <script src="{{ asset('js/guest/pieces/list-pieces.js') }}"></script>
{% endblock javascripts %}



